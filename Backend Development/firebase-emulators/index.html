<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Firebase Emulators | OneArmy Community Platform</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://onearmy.github.io/community-platform/community-platform/Backend Development/firebase-emulators"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Firebase Emulators | OneArmy Community Platform"><meta data-react-helmet="true" name="description" content="In order to test backend functions locally, firebase provides a suite of emulators to mimic most functionality seen online (e.g firestore, storage, functions, triggers etc.)"><meta data-react-helmet="true" property="og:description" content="In order to test backend functions locally, firebase provides a suite of emulators to mimic most functionality seen online (e.g firestore, storage, functions, triggers etc.)"><link data-react-helmet="true" rel="shortcut icon" href="/community-platform/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://onearmy.github.io/community-platform/community-platform/Backend Development/firebase-emulators"><link data-react-helmet="true" rel="alternate" href="https://onearmy.github.io/community-platform/community-platform/Backend Development/firebase-emulators" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://onearmy.github.io/community-platform/community-platform/Backend Development/firebase-emulators" hreflang="x-default"><link rel="stylesheet" href="/community-platform/assets/css/styles.7ae3f653.css">
<link rel="preload" href="/community-platform/assets/js/runtime~main.9873ddc6.js" as="script">
<link rel="preload" href="/community-platform/assets/js/main.d6dd3a8b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/community-platform/"><img src="/community-platform/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/community-platform/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">OneArmy Community Platform</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/community-platform/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ONEARMY/community-platform" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How To Contribute</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Frontend Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Backend Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/community-platform/Backend Development/BackendOverview">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/community-platform/Backend Development/firebase-emulators">Firebase Emulators</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/community-platform/Backend Development/integrations">Integrations</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Testing</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advanced Guides</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/community-platform/Security">Security</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Firebase Emulators</h1></header><p>In order to test backend functions locally, firebase provides a suite of emulators to mimic most functionality seen online (e.g firestore, storage, functions, triggers etc.)</p><p>In order to use the emulators run the following start script</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>To run emulators locally you will need (as described in: <a href="https://firebase.google.com/docs/emulator-suite/install_and_configure" target="_blank" rel="noopener noreferrer">https://firebase.google.com/docs/emulator-suite/install_and_configure</a>)</p><ul><li><a href="https://firebase.google.com/docs/cli" target="_blank" rel="noopener noreferrer">Firebase CLI</a> version 8.14.0 or higher</li><li><a href="https://openjdk.java.net/install/" target="_blank" rel="noopener noreferrer">Java</a> version 1.8 or higher</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="getting-started"></a>Getting Started<a class="hash-link" href="#getting-started" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yarn start:emulated</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will start the following:</p><ul><li><p><strong>Functions emulator</strong><br>
May take a few minutes to download required binaries when running for the first time</p></li><li><p><strong>Functions src watcher</strong><br>
To recompile functions on update</p></li><li><p><strong>Platform server</strong><br>
On port 4000 to indicate that it should communicate with emulators instead of live site)</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="emulator-dashboard"></a>Emulator Dashboard<a class="hash-link" href="#emulator-dashboard" title="Direct link to heading">#</a></h2><p>The emulator should start at http://localhost:4001. Follow the link to see an overview of the available services</p><p><img alt="Dashboard" src="/community-platform/assets/images/firebase-emulators-dashboard-44f579db6b1b1e3a1f0ea524d6c2ef1e.png"></p><p>Clicking on individual tabs will take you to a page similar to the firebase console, from where you can interact with services.</p><p>Note - any data populated into the emulator will be deleted after the emulator has closed (restoring to original state). See the section below about persistant and seed data</p><header><h1>Seed data</h1></header><p>By default the emulators load any data found in the <a href="/functions/data/emulated">functions/data/emulated</a> folder, which can be previously exported from another firebase app or emulator instance.</p><p>By default this data is not committed to the repo and so initial data will be empty, however specific zip files have been generated from site backup files and can be loaded for testing</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="loading-seed-data"></a>Loading seed data<a class="hash-link" href="#loading-seed-data" title="Direct link to heading">#</a></h2><p>By default when the script first runs it will populate seed data from <a href="/functions/data/seed">functions/data/seed</a>. This can be repopulated either by deleting the <a href="/functions/data/emulated">functions/data/emulated</a> folder, or by manually calling the seed data script:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yarn workspace functions run emulator:seed</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will load the default seed data from the zip file <a target="_blank" href="/community-platform/assets/files/seed-default-d31ef33655a46dcb73f651084881ac60.zip">functions/data/seed</a>.</p><p>The default data contains a snapshot of most howtos, mappins etc. from the export data of the file (so may not be fully up-to-date). It also includes 2 user profiles for login:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">username: demo_user@example.com</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">password: demo_user</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">username: demo_admin@example.com</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">password: demo_admin</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you need newer or other data sources contact the repo admins who can hopefully help out.</p><p>The fully seeded database should look something like this:</p><p><img alt="Seeded DB" src="/community-platform/assets/images/firebase-emulator-seeded-f9d5d4126d2c2bb2a826f385531048ad.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="updating-seed-data"></a>Updating seed data<a class="hash-link" href="#updating-seed-data" title="Direct link to heading">#</a></h2><p>When the emulators close they discard any changes made, so seed data documents that have been updated will revert to their original state next time the emulator is loaded.</p><p>Whilst this is useful to preserve a clean testing state, sometimes it might be desirable to persist changes (such as adding additional auth users, or specific example docs)</p><p>This can be achieved by passing the <code>--export-on-exit=./path/to/export/folder</code> flag to the script that starts the functions emulators. This can be run by modifiying the functions start at <a target="_blank" href="/community-platform/assets/files/start-94571c3127a48157e3c52161d81634da.ts">functions/scripts/start.ts</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// change this value if also wanting to export data</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cmd </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">cmd</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)"> --export-on-exit=</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation constant" style="color:rgb(130, 170, 255)">EMULATOR_IMPORT_FOLDER</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>NOTE - due to filepath handling this is usually best done on a mac/linux device (windows export formattedly inconsistently for linux)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="resetting-seed-data"></a>Resetting seed data<a class="hash-link" href="#resetting-seed-data" title="Direct link to heading">#</a></h2><p>As previously mentioned, all data will be reverted back to original/seed state after emulators have closed, so there is no need to reset. If manually exported data has been copied to overwrite the seed data, the default seed can be restored using the load script above.</p><header><h1>Calling Functions</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="http-functions"></a>HTTP Functions<a class="hash-link" href="#http-functions" title="Direct link to heading">#</a></h2><p>E.g. A development and testing API has been created at <a target="_blank" href="/community-platform/assets/files/index-5ded7ab218408df41dbb8217d12c5807.ts">functions/src/dev/index.ts</a>. When running it can be called by making a GET request to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">http://localhost:4002/{projectId}/us-central1/dev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where the projectId may be specified from configuration (default for emulators is <code>emulator-demo</code>)</p><p>Using a REST client like <a href="https://insomnia.rest/" target="_blank" rel="noopener noreferrer">Insomnia</a> or <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman</a> can simplify the process of making api requests</p><p><em>E.g. Insomnia Rest Client</em>
<img alt="Insomnia Rest Client" src="/community-platform/assets/images/firebase-emulator-rest-client-827c81b29eb3c9d4fa3c89d24bdddbf4.png"></p><header><h1>Authentication</h1></header><p>By default emulators allow full read/write access to all resources, however firebase functions still expect an authenticated user in order to access various external APIs before completing operations.</p><p>The current workaround for this is authenticating using a custom service-account that has limited (read-only) access to resources on the testing project. This is done automatically during the start script <a target="_blank" href="/community-platform/assets/files/start-94571c3127a48157e3c52161d81634da.ts">functions/scripts/start.ts</a>.</p><p>Alternatively developers can request access to join the firebase project for full access to the testing project, however it&#x27;s hoped that this is not required.</p><header><h1>Troubleshooting</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="port-in-use"></a>Port in use<a class="hash-link" href="#port-in-use" title="Direct link to heading">#</a></h2><p><em>Error Message</em><br>
<code>Error: Could not start Database Emulator, port taken.</code></p><p>Should see exact issue in warning, e.g.
<code>! firestore: Port 4003 is not open on localhost, could not start Firestore Emulator.</code>
Or
<code>Something is already running on port 4000.</code></p><p>Try to identify what is already running, and if required kill the process. Methods may differ depending on operating system, here are a couple examples:</p><p><em>Windows: List processes on port 4003</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">netstat </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">ano </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> findstr </span><span class="token number" style="color:rgb(247, 140, 108)">4003</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* example output */</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TCP    </span><span class="token number" style="color:rgb(247, 140, 108)">127.0</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.1</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">4003</span><span class="token plain">         </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token number" style="color:rgb(247, 140, 108)">.0</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">              LISTENING       </span><span class="token number" style="color:rgb(247, 140, 108)">8272</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><em>Windows: Kill process</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">taskkill </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">F </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">PID </span><span class="token number" style="color:rgb(247, 140, 108)">8272</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><em>Linux: List processes on port</em>
See a few examples at: <a href="https://stackoverflow.com/questions/11583562/how-to-kill-a-process-running-on-particular-port-in-linux/32592965" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/11583562/how-to-kill-a-process-running-on-particular-port-in-linux/32592965</a>
e.g.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install lsof</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npx cross-port-killer 4003</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="firestore-emulator-fatal-error"></a>Firestore Emulator fatal error<a class="hash-link" href="#firestore-emulator-fatal-error" title="Direct link to heading">#</a></h2><p>If one of the emulators throws a fatal error you might see a vague error message such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">âš   firestore: Fatal error occurred:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Firestore Emulator has exited with code: 1,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   stopping all running emulators</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Usually a more informative log can be found in a created log file, e.g. <a href="/functions/firestore-debug.log">firestore-debug.log</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Exception in thread &quot;main&quot; com.google.cloud.datastore.core.exception.DatastoreException: /mnt/c/apps/oneArmy/community-platform/functions/data/emulated/firestore_export/all_namespaces\all_kinds\all_namespaces_all_kinds.export_metadata (No such file or directory)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at com.google.cloud.datastore.emulator.impl.ExportImportUtil.parseBackupFile(ExportImportUtil.java:316)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at com.google.cloud.datastore.emulator.impl.ExportImportUtil.fetchEntities(ExportImportUtil.java:62)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at com.google.cloud.datastore.emulator.firestore.CloudFirestore.main(CloudFirestore.java:90)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Caused by: java.io.FileNotFoundException: /mnt/c/apps/oneArmy/community-platform/functions/data/emulated/firestore_export/all_namespaces\all_kinds\all_namespaces_all_kinds.export_metadata (No such file or directory)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/java.io.FileInputStream.open0(Native Method)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/java.io.FileInputStream.open(FileInputStream.java:219)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at com.google.cloud.datastore.emulator.impl.ExportImportUtil.parseBackupFile(ExportImportUtil.java:312)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this example it is trying to locate the seed data which does not exist, so to fix run the seed command</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yarn workspace functions run emulator:seed</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>There might be similar issues logged in <a href="/functions/firebase-debug.log">firesbase-debug.log</a>, however this file might be deleted on exit so will require opening before crash</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ONEARMY/community-platform/edit/master/documentation/docs/Backend Development/firebase-emulators.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/community-platform/Backend Development/BackendOverview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/community-platform/Backend Development/integrations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Integrations Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#getting-started" class="table-of-contents__link">Getting Started</a></li><li><a href="#emulator-dashboard" class="table-of-contents__link">Emulator Dashboard</a></li><li><a href="#loading-seed-data" class="table-of-contents__link">Loading seed data</a></li><li><a href="#updating-seed-data" class="table-of-contents__link">Updating seed data</a></li><li><a href="#resetting-seed-data" class="table-of-contents__link">Resetting seed data</a></li><li><a href="#http-functions" class="table-of-contents__link">HTTP Functions</a></li><li><a href="#port-in-use" class="table-of-contents__link">Port in use</a></li><li><a href="#firestore-emulator-fatal-error" class="table-of-contents__link">Firestore Emulator fatal error</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community-platform/">Style Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/up3nBbEbxY" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ONEARMY/community-platform" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021</div></div></div></footer></div>
<script src="/community-platform/assets/js/runtime~main.9873ddc6.js"></script>
<script src="/community-platform/assets/js/main.d6dd3a8b.js"></script>
</body>
</html>